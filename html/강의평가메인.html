<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/강의평가.css">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <header>
        <div class="inner">
            <!-- header -->
            <h1>
                <a href="메인.html">
                    <img src="../img/img_ezenInside2.png" alt="">
                </a>
            </h1>
            <ul class="top-menu">
                <li><a href="" id="loginText">로그인</a></li>
                <li><a href="myinfo.html">내정보</a></li>
                <li><a href="쪽지.html">쪽지</a></li>
            </ul>
            <nav class="nav">
                <ul>
                    <li><a href="notice_board.html" class="stress">공지사항</a></li>
                    <li><a href="free_board.html" class="stress">자유게시판</a></li>
                    <li><a href="시간표.html" class="stress">시간표</a></li>
                    <li><a href="강의평가메인.html" class="stress">강의평가</a></li>
                    <li><a href="학점계산기.html" class="stress">학점계산기</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <!-- 여기부터 작업! -->
        <div class="inner">
            <div class="search">
                <div class="my-point">
                    <a href="" id="myPoint">
                        <span>내 포인트 현황</span>
                        <div>
                            <span class="pt-red">16 포인트</span>
                            <img src="../img/arrow_right_red.svg" alt="">
                        </div>
                    </a>
                </div>
                <input type="search" id="searchInput" placeholder="과목명, 교수명으로 검색">
                <div class="search-icon" id="searchIcon"></div>
                <div class="results" id="results"></div>
            </div>
            <div class="board-list">
                <a href="강의평가개요.html">
                    <div class="post">
                        <h2 class="post-title">중급중국어청취</h2>
                        <div class="post-meta">
                            <div class="post-author">김민경</div>
                            <div class="post-rating">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/star_empty.png" alt="">
                            </div>
                            <div class="post-date">24년 1학기 수강자</div>
                        </div>
                        <p class="post-preview">                          
                            교수님 너무 착하고 이쁘시고 웃기시고 승헌쓰 탕후루 따라하시는 것도 너무 귀여우시고 무엇보다 점수가 후하다.
                            강추 교수님 사랑해요 매주 과제가 있어서 주어진 주제에 맞춰 리스닝 연습을 해야 하는데, 이게 또 나름 재미있답니다!
                            강의가 정말 흥미롭고 유익해서, 수업을 통해 중국어 표현을 정말 많이 익혔어요.😊 중급 중국어를 듣는 연습을 하면서 중국어의 다양한 억양과 발음을 배울 수 있는
                            정말 유익한 강의예요! 수업에서는 실생활에서 쓰이는 표현들도 많이 배우고, 덕분에 회화 실력이 많이 늘었어요
                        </p>
                    </div>
                </a>
                <a href="강의평가개요.html">
                    <div class="post">
                        <h2 class="post-title">일반화학1</h2>
                        <div class="post-meta">
                            <div class="post-author">박정우</div>
                            <div class="post-rating">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/star_empty.png" alt="">
                                <img src="../img/star_empty.png" alt="">
                            </div>
                            <div class="post-date">23년 2학기 수강자</div>
                        </div>
                        <p class="post-preview">
                            화학에 관심만 있었구 심지어 문돌이라 학점 엄청 신경쓰였는데 설명해주신대로
                            열심히듣고 기초부터 알려주셔서 차근차근 배워서 B+받았음 ㅠ 그냥 나름나름
                            그냥저냥 문돌이치고 잘받았다~ 이렇게 생각함 조모임없고 과제없어서 시험에만
                            집중할 수 있어서 좋앗음 수업 내용도  화알못에게 유익하고 알차기도 했고.. 좋았습니당
                        </p>
                    </div>
                </a>
                <a href="강의평가개요.html">
                    <div class="post">
                        <h2 class="post-title">일반화학1</h2>
                        <div class="post-meta">
                            <div class="post-author">신정아</div>
                            <div class="post-rating">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/star_empty.png" alt="">
                                <img src="../img/star_empty.png" alt="">
                            </div>
                            <div class="post-date">23년 2학기 수강자</div>
                        </div>
                        <p class="post-preview">
                            진짜진짜. 최애교수님! 문과인데 화학강의 수강해서 조금 무서웠지만,
                            정말 그럴필요 하나도 없었어요. 동영상강의가 조금 길긴한데
                            여러 예시와 책 밑줄 치는 부분도 포함되어서 재밌게 술술 들었어요.
                            대면수업도 재밌게 해주시고, 일찍 끝내주시려고 노력해주시는게 보여서
                            너무 좋았습니다. 또한 강의 내용이 화학적인것만 다루는게 아니라
                            강의명처럼 생활속에 응용되는 실용적인걸 배워서 재밌었어요!
                            너무 추천하는 강의입니다.
                        </p>
                    </div>
                </a>
                <a href="강의평가개요.html">
                    <div class="post">
                        <h2 class="post-title">세계시민의식의형성과다문화교육</h2>
                        <div class="post-meta">
                            <div class="post-author">최병준</div>
                            <div class="post-rating">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                            </div>
                            <div class="post-date">23년 2학기 수강자</div>
                        </div>
                        <p class="post-preview">
                            시험은 중간에만 객관식 문제로 봄. 기말은 팀으로 발표 준비해서 영상으로 만들어서 제출했음.
                            교수님이 학생들에게 관심이 많음. 원래 비대면 수업인데 학교 측에서 교수님이 신청하면
                            한 번 대면 수업하게 해주는 것을 신청해서 한 번은 강의실에서 수업을 들음.
                            수업 내내 학생들에게 꾸준히 질문하여 질의응답이 원활히 되는 수업이라고 생각함.
                            그리고 수업 시간 전에 설문조사를 시작하여 그것을 토대로 수업함. 학점 정말 잘 주심.
                            자신이 열심히 하면 원하는 성적을 잘 받을 수 있을 듯. 외국인 학생 비율이 많아서
                            팀 발표 준비할 때 힘들었음. 이거 빼면 완전 추천.
                        </p>
                    </div>
                </a>
                <a href="강의평가개요.html">
                    <div class="post">
                        <h2 class="post-title">사이버토익</h2>
                        <div class="post-meta">
                            <div class="post-author">진유림</div>
                            <div class="post-rating">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/star_empty.png" alt="">
                                <img src="../img/star_empty.png" alt="">
                            </div>
                            <div class="post-date">23년 2학기 수강자</div>
                        </div>
                        <p class="post-preview">
                            토익 공부 할 겸해서 수강신청 했는데 토익에 자신 없으신 분들, 시간 없으신 분들은 듣지 마시길.
                            2~3주에 한 번씩 시험 봐야 돼고, 오답 정리 해야 하고, 책은 쓰지도 않는데 인증 때문에 사야함.
                            최종 시험은 다 모여서 실전처럼 토익 시험 봄. 솔직히 말해서 이 강의는 생각보다 꽤 부담스러움.
                            시험이 자주 있고, 오답 정리까지 해야 해서 시간이 많이 필요하고 또, 인증용 책을 사야 하는데
                            실질적으로 도움이 되는 건 별로 없어서 걍 불필요한 지출이 심함. 최종 시험도 실전처럼 보는 건
                            좋은데, 긴장감만 더해지고 실력 향상에는 큰 도움이 없는 느낌? 시간이 많고 열정적인 분들이 아니라면,
                            강의 내용에 만족하기 어려울 듯. 별점 3점짜리 강의로, 그냥 그렇다고 보면 될 듯.
                        </p>
                    </div>
                </a>
                <a href="강의평가개요.html">
                    <div class="post last-post">
                        <h2 class="post-title">디자인과생활</h2>
                        <div class="post-meta">
                            <div class="post-author">최미정</div>
                            <div class="post-rating">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/full_star.svg" alt="">
                                <img src="../img/star_empty.png" alt="">
                            </div>
                            <div class="post-date">23년 2학기 수강자</div>
                        </div>
                        <p class="post-preview">
                            그냥 피피티가지고 수업하시는데 피피티자료는 따로 주시진 않아요. 그리고 중간에 영상한번 보여주시고요.
                            고학번들 많이 듣는다고 해서 걱정했는데 그냥 열심히만 하면 되는과목입니다.
                            열심히했더니 성적도 잘 나오네요
                        </p>
                    </div>
                </a>
            </div>
        </div>
    </main>
    <footer>
        <div class="inner">
            <!-- footer -->
            <div class="top-title bold">
                <span>이젠 아카데미 학원</span>
            </div>
            <div class="middle">
                <span>인천광역시</span>
                <span class="before">사업자등록번호: 000-00-00000</span>
                <span class="before">직업정보제공사업 신고번호: 0*14</span>
            </div>
            <div class="bottom">
                <span><a href="">이용약관</a></span>
                <span class="before bold"><a href="">개인정보처리방침</a></span>
                <span class="before"><a href="">청소년보호정책</a></span>
                <span class="before"><a href="">커뮤니티이용규칙</a></span>
                <span class="before"><a href="">문의하기</a></span>
                <span class="before"><a href="">ㅇㅇㅇ</a></span>
            </div>
    </footer>
    <script>
        function setLocalStorage(key, value){ localStorage.setItem(key,JSON.stringify(value)); } 
        function getLocalStorage(key){ return JSON.parse(localStorage.getItem(key)); }

        let myObj = getLocalStorage('loginInfomation');
        let myId = myObj.id;
        let loginOp = 'guest'
        const loginText = document.getElementById('loginText');

        console.log(loginOp)
        if(myId == ''){
            loginOp = 'guest'
            loginText.innerText = '로그인'
        }else if(myId.includes('admin')){
            loginOp = 'master'
            loginText.innerText = '로그아웃'
        }else if(myId != ''){
            loginOp = 'user'
            loginText.innerText = '로그아웃'
        }

        // 로그인 로그아웃 관리자 별로 다른 UI 제공
        document.getElementById('loginText').addEventListener('click',(e)=>{
            e.preventDefault();
            if(document.getElementById('loginText').innerText == '로그인'){
                location.href = "login.html";
            }else if(document.getElementById('loginText').innerText == '로그아웃'){
                setLocalStorage('loginInfomation',{id : '',password : '', name : '', email : ''})
                location.href = "메인.html";
            }
        })

        // 페이지 로드 시 JSON 데이터 로드
        window.onload = loadJsonData;

        // 로그인 유무 확인
        function getLocalStorage(key){ return JSON.parse(localStorage.getItem(key)); }
        let loginInfo = getLocalStorage('loginInfomation')
        document.getElementById('myPoint').addEventListener('click',()=>{
            if (!loginInfo){
                alert('로그인이 필요합니다.');
            }
        })


        let jsonData = {}; //json 데이터 저장
        // json 데이터 비동기 로드
        async function loadJsonData() {
            try {
                let response = await fetch('../json/전국대학공개강의서비스정보_KOCW_표준데이터.json');
                if (!response.ok) {
                    throw new Error('비정상적 응답');
                }
                jsonData = await response.json();
            } catch (error) {
                console.error('json로딩 에러:', error);
            }
        }

        // 검색 기능
        function performSearch(query) {
            let resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = ''; 
            if (query) {
                let filteredRecords = jsonData.records.filter(record => {
                    return Object.values(record).some(value =>
                        value.toLowerCase().includes(query)
                    );
                });

                if (filteredRecords.length > 0) {
                    const resultsHtml = filteredRecords.map(record => {
                        return `<a href="강의평가개요.html"><div class="result">${Object.entries(record).map(([key, value]) => `<strong>${key}:</strong> ${value}`).join(', ')}</div></a>`;
                    }).join('');
                    resultsContainer.innerHTML = resultsHtml;
                } else {
                    resultsContainer.innerHTML = '<div class="result">검색 결과가 없습니다.</div>';
                }
            }
        }

        // 검색 아이콘 클릭 시 검색 수행
        document.getElementById('searchIcon').addEventListener('click', () => {
            let query = document.getElementById('searchInput').value;
            performSearch(query);
            
        });

        //Enter 키를 눌렀을 때도 검색 수행
        document.getElementById('searchInput').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault(); 
                let query = document.getElementById('searchInput').value;
                performSearch(query);
            }
        });

    </script>
</body>

</html>